<div data-controller="ingredients-and-steps" data-ingredients-and-steps-ingredients-value="<%= recipe.ingredients.length %>" data-ingredients-and-steps-steps-value="<%= recipe.steps.length %>">
<%= form_with model: recipe do |form| %>
  <div class="input-field">
    <%= form.label :name, "Name" %>
    <%= form.text_field :name, class: "text-input" %>
  </div>
  <div class="input-field">
    <%= form.label :author, "Author" %>
    <%= form.text_field :author, class: "text-input" %>
  </div>
  <div class="input-field">
    <%= form.label :meal_type, "Type" %>
    <%= form.select :meal_type, ["Breakfast", "Lunch", "Dinner", "Snack", "Dessert", "Drink", "Cocktail"] %>
  </div>
  <div class="input-field">
    <%= form.label :protein, "Protein" %>
    <%= form.select :protein, ["Poultry", "Red Meat", "Seafood", "Vegetarian"] %>
  </div>
  <div class="input-field">
    <%= form.label :culture, "Culture" %>
    <%= form.text_field :culture, class: "text-input" %>
  </div>
  <div class="input-field">
    <%= form.label :servings, "Number of Servings" %>
    <%= form.number_field :servings, class: "text-input" %>
  </div>
  <h3>Ingredients</h3>
  <div data-ingredients-and-steps-target="ingredientList">
    <%= form.fields_for :ingredients do |ingredients_form|%>
      <template data-ingredients-and-steps-target="ingredientTemplate">
        <div class="input-field" data-ingredients-and-steps-target="ingredient">
          <div>
            <%= ingredients_form.label :name, "Name" %>
            <%= ingredients_form.text_field :name, class: "text-input" %>
            <%= ingredients_form.label :measurement_amount, "Measurement Amount" %>
            <%= ingredients_form.number_field :measurement_amount, step: :any, class: "text-input" %>
            <%= ingredients_form.label :measurement_type, "Unit" %>
            <%= ingredients_form.text_field :measurement_type, class: "text-input" %>
          </div>
        </div>
      </template>
      <div class="input-field" data-ingredients-and-steps-target="ingredient">
        <div>
          <%= ingredients_form.label :name, "Name" %>
          <%= ingredients_form.text_field :name, class: "text-input" %>
          <%= ingredients_form.label :measurement_amount, "Measurement Amount" %>
          <%= ingredients_form.number_field :measurement_amount, step: :any, class: "text-input" %>
          <%= ingredients_form.label :measurement_type, "Unit" %>
          <%= ingredients_form.text_field :measurement_type, class: "text-input" %>
        </div>
      </div>
    <% end %>
  </div>
  <div>
    <button type="button" data-action="ingredients-and-steps#addIngredient">Add Ingredient</button>
    <button type="button" data-action="ingredients-and-steps#removeIngredient">Remove Ingredient</button>
  </div>

  <h3>Steps</h3>
  <ol data-ingredients-and-steps-target="stepList">
    <%= form.fields_for :steps do |steps_form|%>
    <template data-ingredients-and-steps-target="stepTemplate">
      <li class="input-field" data-ingredients-and-steps-target="step">
        <%= steps_form.text_area :instructions, size: "40x5", class: "text-input" %>
      </li>
    </template>
    <li class="input-field" data-ingredients-and-steps-target="step">
      <%= steps_form.text_area :instructions, size: "40x5", class: "text-input" %>
    </li>
    <% end %>
  </ol>
  <div>
    <button type="button" data-action="ingredients-and-steps#addStep">Add Step</button>
    <button type="button" data-action="ingredients-and-steps#removeStep">Remove Step</button>
  </div>
<%= form.submit "Save Recipe", class: "button" %>
<% end %>

<%# <div>
  <button data-action="ingredients-and-steps#addIngredient">Add Ingredient</button>
  <button data-action="ingredients-and-steps#removeIngredient">Remove Ingredient</button>
</div>
<div>
  <button data-action="ingredients-and-steps#addStep">Add Step</button>
  <button data-action="ingredients-and-steps#removeStep">Remove Step</button>
</div> %>
<div data-ingredients-and-steps-target="warning"></div>
</div>